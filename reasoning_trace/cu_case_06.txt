Overall Context and Setup Assumptions: This is an OpenAirInterface (OAI) 5G NR standalone (SA) mode deployment using radio frequency simulator (rfsim) for testing. The setup consists of three main components: CU (Central Unit), DU (Distributed Unit), and UE (User Equipment). Expected flow involves: component initialization → F1 interface setup between CU and DU → NGAP setup with AMF → UE random access (PRACH) → RRC connection → PDU session establishment. Key potential issues to look for include tracking area code mismatches between CU and DU, network interface binding failures, and protocol handshake errors. The network_config shows cu_conf with invalid tracking_area_code=0 (should be non-zero), du_conf with valid tracking_area_code=1, and ue_conf with rfsimulator settings. Initial analysis shows tracking_area_code=0 as a clear configuration error since TAC values must be non-zero for proper AMF registration and cell identification.

Analyzing CU Logs: CU initialization shows successful thread creation for TASK_SCTP, TASK_NGAP, TASK_GNB_APP, TASK_RRC_GNB, TASK_CU_F1, and TASK_GTPV1_U. However, critical failures occur: GTPU bind fails with "Cannot assign requested address" for 192.168.8.43:2152, SCTP connection establishment fails, resulting in "can't create GTP-U instance" and "Failed to create CUUP N3 UDP listener". Despite these failures, F1AP setup succeeds with DU connection (assoc_id 23), UE context creation (CU UE ID 1, DU UE ID 54079), and RRC setup completion. The CU reaches NR_RRC_CONNECTED state but shows "No AMF is associated to the gNB", indicating NGAP connection failure. Cross-referencing with network_config, the cu_conf shows NETWORK_INTERFACES with GNB_IPV4_ADDRESS_FOR_NG_AMF and GNB_IPV4_ADDRESS_FOR_NGU both set to 192.168.8.43, which matches the failed GTPU bind address.

Analyzing DU Logs: DU initialization is successful with RU (Radio Unit) configuration using librfsimulator.so, proper antenna setup (4x4 MIMO), and TDD configuration for band 78. Random access procedure completes successfully: PRACH detection at frame 183.19, RA-Msg2/Msg3/Msg4 exchange, and contention resolution. UE achieves stable connection with good signal metrics (RSRP -44 dB, SNR 57.0 dB, BLER decreasing over time). Statistics show normal UL/DL traffic with increasing frame counts (256.0, 384.0, 512.0, etc.) and stable MCS 9. No PHY/MAC errors or assertions are present. The DU appears fully functional and can communicate with UE (via rfsim), but F1 control plane connection to CU is established.

Analyzing UE Logs: UE shows repetitive band 78 TDD configuration confirmations and Harq round statistics progressing from 8/0/0 to 11/0/0 downlink rounds, indicating active communication. No connection failures or errors are evident - the UE appears to be successfully connected and exchanging data with the network via rfsimulator. The ue_conf shows proper rfsimulator configuration with serveraddr "127.0.0.1" and serverport "4043", matching the DU's rfsimulator settings.

Cross-Component Correlations and Root Cause Hypothesis: The gNBs.tracking_area_code=0 configuration in cu_conf is the root cause. This invalid zero value (tracking area codes must be non-zero per 3GPP specifications) prevents proper AMF registration and cell identification. The GTPU and SCTP binding failures (errno 99 "Cannot assign requested address") are symptoms of AMF registration issues stemming from invalid TAC configuration. Timeline correlation shows CU initialization partially succeeds (F1AP works), but network-facing services fail, while DU and UE operate normally. The invalid TAC=0 explains why AMF association fails despite successful F1 connection, as the AMF rejects or cannot process registration requests with invalid tracking area codes.

Recommendations for Fix and Further Analysis: Change tracking_area_code from 0 to a valid non-zero value (e.g., 1 to match DU configuration) in cu_conf.gNBs. Verify AMF registration succeeds after the fix. Test with corrected configuration to ensure GTPU/SCTP binding succeeds and AMF association works. Monitor NGAP registration logs during startup. If issues persist, check AMF configuration and ensure TAC values are consistent across CU and DU.

Corrected network_config:
{
  "cu_conf": {
    "gNBs": {
      "tracking_area_code": 1  // Changed from invalid 0 to valid non-zero value
    }
  }
}
